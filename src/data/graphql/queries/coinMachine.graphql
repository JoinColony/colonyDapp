# Coin Machine Extension
#
#

query CoinMachineSaleTokens($colonyAddress: String!) {
  coinMachineSaleTokens(colonyAddress: $colonyAddress) @client {
    sellableToken {
      address
      decimals
      symbol
      name
    }
    purchaseToken {
      address
      decimals
      symbol
      name
    }
  }
}

query CoinMachineCurrentPeriodPrice($colonyAddress: String!) {
  coinMachineCurrentPeriodPrice(colonyAddress: $colonyAddress) @client
}

query CoinMachineBoughtTokens($colonyAddress: String!, $transactionHash: String!) {
  coinMachineBoughtTokens(colonyAddress: $colonyAddress, transactionHash: $transactionHash) @client {
    numTokens
    totalCost
  }
}

query CoinMachineTransactionAmount($colonyAddress: String!, $transactionHash: String!) {
  coinMachineTransactionAmount(colonyAddress: $colonyAddress, transactionHash: $transactionHash) @client {
    transactionAmount
    transactionSucceed
  }
}

query CoinMachineCurrentPeriodMaxUserPurchase($userAddress: String!, $colonyAddress: String!) {
  coinMachineCurrentPeriodMaxUserPurchase(userAddress: $userAddress, colonyAddress: $colonyAddress) @client
}

query CoinMachineSalePeriod($colonyAddress: String!) {
  coinMachineSalePeriod(colonyAddress: $colonyAddress) @client {
    periodLength
    timeRemaining
  }
}

query CurrentPeriodTokens($colonyAddress: String!) {
  currentPeriodTokens(colonyAddress: $colonyAddress) @client {
    maxPerPeriodTokens
    activeSoldTokens
    targetPerPeriodTokens
  }
}

query CoinMachineTokenBalance($colonyAddress: String!) {
  coinMachineTokenBalance(colonyAddress: $colonyAddress) @client
}

query CoinMachineTokenSales($colonyAddress: String!) {
  coinMachineTokenSales(colonyAddress: $colonyAddress) @client {
    saleEndedAt
    tokensBoughtEvents {
      type
      name
      values
      createdAt
      emmitedBy
      blockNumber
      transactionHash
    }
  }
}
